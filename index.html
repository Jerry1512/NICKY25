<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NICKY25</title>

<style>
:root{
  --white:#ffffff;
  --glass:rgba(255,255,255,0.12);
}
*{box-sizing:border-box}
html,body{
  height:100%;
  width:100%;
  margin:0;
  background:#031226;
  font-family:Poppins,system-ui,Arial;
  overflow:hidden;
  -webkit-tap-highlight-color:transparent;
}
.screen{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  opacity:0;
  pointer-events:none;
  transition:opacity .5s ease;
}
.screen.active{
  opacity:1;
  pointer-events:auto;
}
.bg{
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  filter:brightness(.9);
  z-index:0;
}
.wrap{
  position:relative;
  z-index:6;
  width:92%;
  max-width:960px;
  margin:0 auto;
  text-align:center;
  color:var(--white);
}

/* SCREEN 1 */
#screen1 .wrap{padding-top:14vh}
.title1{
  font-size:clamp(22px,6vw,38px);
  font-weight:900;
  text-shadow:0 10px 30px rgba(0,20,40,0.7);
}
.subtitle1{
  font-size:clamp(12px,3.4vw,18px);
  opacity:.95;
  margin-top:.5rem;
}
.tap-btn{
  margin-top:1.2rem;
  padding:.9rem 2.6rem;
  border-radius:28px;
  border:0;
  background:linear-gradient(180deg,rgba(255,255,255,0.08),rgba(255,255,255,0.03));
  backdrop-filter:blur(6px);
  box-shadow:0 12px 40px rgba(10,30,60,0.3);
  color:var(--white);
  font-weight:800;
  cursor:pointer;
}

/* PANELS – Screens 2 & 4 */
.panel-container{
  width:92%;
  height:86%;
  display:flex;
  flex-direction:column;
  gap:18px;
  padding:3vh 0;
  justify-content:space-between;
  z-index:5;
}
.panel{
  height:30%;
  min-height:90px;
  border-radius:14px;
  overflow:visible;
  position:relative;
  cursor:pointer;
}
.card{
  width:100%;
  height:100%;
  border-radius:12px;
  overflow:hidden;
  position:relative;
  background:#000;
  box-shadow:0 16px 50px rgba(0,20,40,0.35);
}
.img-wrap{
  position:absolute;
  inset:0;
  transition:transform .85s cubic-bezier(.2,.9,.28,1);
  transform-origin:center;
}
.front-img{
  width:100%;
  height:100%;
  object-fit:cover;
  display:block;
}
.back{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;
  color:var(--white);
  padding:18px;
  background:rgba(0,0,0,0.45);
}
.blur-image{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  filter:blur(10px) brightness(.85);
  transform:scale(1.02);
}
.panel-text{
  position:relative;
  z-index:3;
  font-size:clamp(12px,3vw,18px);
  line-height:1.45;
  text-shadow:0 6px 18px rgba(0,0,0,0.6);
}
.img-flipped{
  transform:rotateY(180deg);
}

/* LETTER PAGE */
.letter-wrap{
  width:92%;
  max-width:920px;
  background:rgba(255,255,255,0.06);
  backdrop-filter:blur(6px);
  border-radius:14px;
  padding:26px;
  color:#fff;
  box-shadow:0 20px 60px rgba(0,20,40,0.5);
  z-index:5;
}
.letter-title{
  font-size:clamp(22px,5vw,36px);
  font-weight:900;
  margin-bottom:12px;
}
.letter-text{
  font-size:clamp(14px,3.4vw,18px);
  line-height:1.6;
  white-space:pre-wrap;
  text-align:left;
}
.letter-overlay{
  position:absolute;
  inset:0;
  cursor:pointer;
  z-index:7;
}

/* SCREEN 5 SLIDESHOW */
#slides-wrap{
  position:absolute;
  inset:0;
  z-index:0;
}
.slide{
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  filter:blur(8px) brightness(.82);
  opacity:0;
  transition:opacity 1s ease;
}
.slide.show{
  opacity:1;
}
.final-line{
  color:#fff;
  font-weight:800;
  font-size:clamp(18px,4vw,30px);
  opacity:0;
  transform:translateY(10px);
  transition:opacity .9s,transform .9s;
}

@media(max-width:420px){
  .panel{height:28vh}
  .letter-text{text-align:center}
}
</style>
</head>
<body>

<!-- AUDIO -->
<audio id="bgm" src="assets/KaiseHua.mp3" preload="auto" autoplay muted loop></audio>

<!-- SCREEN 1 -->
<section id="screen1" class="screen active">
  <div class="bg" style="background-image:url('assets/intro.jpeg')"></div>
  <div class="wrap">
    <div class="title1">HAPPY BIRTHDAY JANUDI</div>
    <div class="subtitle1">A SPECIAL DAY FOR THE LOVE OF MY LIFE</div>
    <button id="openBtn" class="tap-btn">TAP TO OPEN</button>
  </div>
</section>

<!-- SCREEN 2 -->
<section id="screen2" class="screen">
  <div class="bg" style="background-image:url('assets/SCREEN3.jpeg')"></div>

  <div class="panel-container">
    <div class="panel" id="p2-1">
      <div class="card">
        <div class="img-wrap" id="img2-1">
          <img class="front-img" src="assets/ima1.jpeg">
        </div>
        <div class="back">
          <img class="blur-image" src="assets/ima1.jpeg">
          <div class="panel-text">
            Happiest birthday Nicky, always stay happy.<br>
            You’re one of the most precious parts of my life.<br>
            Every moment with you feels warm, soft, and safe.<br>
            Tap the 2nd image UMAHH.
          </div>
        </div>
      </div>
    </div>

    <div class="panel" id="p2-2">
      <div class="card">
        <div class="img-wrap" id="img2-2">
          <img class="front-img" src="assets/ima2.jpeg">
        </div>
        <div class="back">
          <img class="blur-image" src="assets/ima2.jpeg">
          <div class="panel-text">
            Your smile, your heart, your softness…<br>
            I fall for them a little more every day.
          </div>
        </div>
      </div>
    </div>

    <div class="panel" id="p2-3">
      <div class="card">
        <div class="img-wrap" id="img2-3">
          <img class="front-img" src="assets/ima3.jpeg">
        </div>
        <div class="back">
          <img class="blur-image" src="assets/ima3.jpeg">
          <div class="panel-text">
            No matter where life takes us,<br>
            my feelings for you will always stay the same—<br>
            pure, patient, gentle, and true.
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- SCREEN 3 -->
<section id="screen3" class="screen">
  <div class="bg" style="background-image:url('assets/ima3.jpeg')"></div>

  <div class="wrap letter-wrap">
    <div class="letter-title">HAPPIEST BIRTHDAY JANUDIIII.</div>
    <div class="letter-text">
If I could describe what you mean to me.
I would say you're a rare kind of warmth—the kind that stays with me even on the coldest days.
You make life softer, happier, and more meaningful just by being in it.
I'm grateful for you in ways words will never fully express.
Thank you for being you.
for being real.
for being someone my heart chose without hesitation.
I may not always say it perfectly, and I may not always express everything the right way…
but every word I write for you, every feeling I share —
it all comes from a place that is real inside me.
    </div>
  </div>

  <div class="letter-overlay" onclick="showScreen('screen4')"></div>
</section>

<!-- SCREEN 4 -->
<section id="screen4" class="screen">
  <div class="bg" style="background-image:url('assets/SCREEN5.jpeg')"></div>

  <div class="panel-container">

    <div class="panel" id="p4-1">
      <div class="card">
        <div class="img-wrap" id="img4-1">
          <div class="panel-text" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.45)">
            WHY I LOVE YOU
          </div>
        </div>
        <div class="back">
          <img class="blur-image" src="assets/ONE.jpeg">
          <div class="panel-text">I love you because you never give up on us.</div>
        </div>
      </div>
    </div>

    <div class="panel" id="p4-2">
      <div class="card">
        <div class="img-wrap" id="img4-2">
          <div class="panel-text" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.45)">
            MY PROMISES TO YOU
          </div>
        </div>
        <div class="back">
          <img class="blur-image" src="assets/TWO.jpeg">
          <div class="panel-text">I promise I'll never let a girl come between us.</div>
        </div>
      </div>
    </div>

    <div class="panel" id="p4-3">
      <div class="card">
        <div class="img-wrap" id="img4-3">
          <div class="panel-text" style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.45)">
            THE FUTURE I WANT WITH YOU
          </div>
        </div>
        <div class="back">
          <img class="blur-image" src="assets/THREE.jpeg">
          <div class="panel-text">
            We get married with our parents' permission and work hard.<br>
            We have our own house.<br>
            Every morning we wake up beside each other.
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- SCREEN 5 -->
<section id="screen5" class="screen">
  <div id="slides-wrap">
    <div class="slide" style="background-image:url('assets/intro.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/ima1.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/ima2.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/ima3.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/SCREEN3.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/SCREEN5.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/ONE.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/TWO.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/THREE.jpeg')"></div>
  </div>

  <div class="wrap" style="z-index:6">
    <div class="final-line" id="line1">WITH ALL MY LOVE (:</div>
    <div class="final-line" id="line2">FOREVER YOURS....</div>
    <div class="final-line" id="line3">THANK YOU FOR LETTING ME LOVE YOU...><</div>
    <div class="final-line" id="line4">SOME LOVE STORIES DON'T NEED WORDS... OURS IS ONE OF THEM>>></div>
    <div class="final-line" id="line5">YOURS JERRY</div>
  </div>
</section>
<script>
/* ---------- helper to show screens ---------- */
function showScreen(id){
  // hide all
  document.querySelectorAll('.screen').forEach(s=>{
    s.classList.remove('active');
    s.setAttribute('aria-hidden','true');
  });
  // show requested
  const el = document.getElementById(id);
  if(!el) return;
  el.classList.add('active');
  el.removeAttribute('aria-hidden');

  // when reaching screen5, start final sequence shortly after transition
  if(id === 'screen5'){
    setTimeout(()=> {
      // begin slideshow and text animations
      startFinal();
    }, 300);
  }
}

/* ---------- Audio control: unmute & start on first user tap ---------- */
const bgm = document.getElementById('bgm');
bgm.volume = 1;
document.getElementById('openBtn').addEventListener('click', async () => {
  try{
    bgm.muted = false;
    await bgm.play();
  }catch(e){
    // ignore autoplay errors — audio will play after user interaction in browsers
  }
  showScreen('screen2');
});

/* ---------- generic flip logic for panel groups ---------- */
/* panelPrefix: 'p2' or 'p4'
   imgPrefix: 'img2' or 'img4'
   total: number of panels (3)
   nextScreen: id to show after all flipped
*/
function setFlip(panelPrefix, imgPrefix, total, nextScreen) {
  const flipped = new Array(total).fill(false);

  for(let i=1;i<=total;i++){
    const panelId = `${panelPrefix}-${i}`;
    const imgId = `${imgPrefix}-${i}`;

    const p = document.getElementById(panelId);
    const imgWrap = document.getElementById(imgId);

    if(!p || !imgWrap) continue;

    // FRONT TAP: flip image only (image rotates)
    p.addEventListener('click', (ev) => {
      // If already flipped, ignore
      if(imgWrap.classList.contains('img-flipped')) return;
      imgWrap.classList.add('img-flipped');
      flipped[i-1] = true;
      // After flipping, if all flipped, schedule next screen after 5s
      if(flipped.every(Boolean)){
        setTimeout(()=> showScreen(nextScreen), 5000);
      }
    }, {passive:true});

    // BACK TAP: just trigger the check (user might click on back)
    const back = p.querySelector('.back');
    if(back){
      back.addEventListener('click', (ev) => {
        ev.stopPropagation();
        // mark this panel as flipped if for some reason it wasn't (edge-case)
        if(!imgWrap.classList.contains('img-flipped')){
          imgWrap.classList.add('img-flipped');
          flipped[i-1] = true;
        }
        if(flipped.every(Boolean)){
          setTimeout(()=> showScreen(nextScreen), 5000);
        }
      }, {passive:true});
    }
  }
}

/* Initialize flips for Screen 2 and Screen 4 */
setFlip('p2','img2',3,'screen3');
setFlip('p4','img4',3,'screen5');

/* ---------- Screen 5 slideshow + text animations ---------- */
let slideInterval = null;
function startSlides(){
  const slides = Array.from(document.querySelectorAll('.slide'));
  if(!slides.length) return;
  let idx = 0;
  // clear any previous
  slides.forEach(s => s.classList.remove('show'));
  slides[0].classList.add('show');

  // safe guard: clear previous interval
  if(slideInterval) clearInterval(slideInterval);

  slideInterval = setInterval(()=>{
    slides[idx].classList.remove('show');
    idx = (idx + 1) % slides.length;
    slides[idx].classList.add('show');
  }, 2000);
}

function startFinal(){
  // start slideshow
  startSlides();

  // animate lines in order, then fade out
  const ids = ['line1','line2','line3','line4','line5'];
  let delay = 400;

  ids.forEach(id=>{
    const el = document.getElementById(id);
    if(!el) return;
    el.style.transition = 'opacity 900ms ease, transform 900ms ease';
    el.style.transform = 'translateY(10px)';
    el.style.opacity = 0;
    // Fade in
    setTimeout(()=>{
      el.style.opacity = 1;
      el.style.transform = 'translateY(0)';
    }, delay);
    delay += 1800;
  });

  // after all shown, fade them out sequentially
  const outStart = delay + 1200;
  ids.forEach((id,i)=>{
    const el = document.getElementById(id);
    if(!el) return;
    setTimeout(()=>{
      el.style.transition = 'opacity 900ms ease';
      el.style.opacity = 0;
    }, outStart + i*900);
  });
}

/* ---------- ensure initial screen is screen1 ---------- */
window.addEventListener('load', ()=> {
  showScreen('screen1');
  // small safety: ensure no panels are pre-flipped
  ['img2-1','img2-2','img2-3','img4-1','img4-2','img4-3'].forEach(id=>{
    const el = document.getElementById(id);
    if(el) el.classList.remove('img-flipped');
  });
});
</script>
</body>
</html>
