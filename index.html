<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>NICKY25</title>
<style>
:root{
  --white:#ffffff;
  --glass:rgba(255,255,255,0.12);
  --soft-blue: #eaf7ff;
}
*{box-sizing:border-box}
html,body{
  height:100%;
  width:100%;
  margin:0;
  background:#031226;
  font-family:Poppins,system-ui,Arial;
  overflow:hidden;
  -webkit-tap-highlight-color:transparent;
}

/* screen base */
.screen{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  opacity:0;
  pointer-events:none;
  transition:opacity .45s ease;
}
.screen.active{
  opacity:1;
  pointer-events:auto;
}

/* background image layer */
.bg{
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  filter:brightness(.92);
  z-index:0;
}

/* content wrapper */
.wrap{
  position:relative;
  z-index:6;
  width:92%;
  max-width:960px;
  margin:0 auto;
  text-align:center;
  color:var(--white);
}

/* screen1 */
#screen1 .wrap{padding-top:12vh}
.title1{font-size:clamp(20px,6vw,36px);font-weight:900;text-shadow:0 10px 30px rgba(0,20,40,0.7)}
.subtitle1{font-size:clamp(12px,3.4vw,18px);opacity:.95;margin-top:.4rem}
.tap-btn{
  margin-top:1.2rem;padding:.9rem 2.6rem;border-radius:28px;border:0;
  background:linear-gradient(180deg,rgba(255,255,255,0.08),rgba(255,255,255,0.03));
  backdrop-filter:blur(6px);box-shadow:0 12px 40px rgba(10,30,60,0.3);
  color:var(--white);font-weight:800;cursor:pointer;
  outline:none;
}

/* panels (screen2 & screen4) */
.panel-container{width:92%;height:86%;display:flex;flex-direction:column;gap:18px;padding:3vh 0;justify-content:space-between;z-index:5}
.panel{height:30%;min-height:100px;border-radius:14px;overflow:visible;position:relative;cursor:pointer}
.card{width:100%;height:100%;border-radius:12px;overflow:hidden;position:relative;background:#000;box-shadow:0 16px 50px rgba(0,20,40,0.35)}

/* FRONT image wrapper */
.img-wrap{
  position:absolute;inset:0;transition:transform .85s cubic-bezier(.2,.9,.28,1), opacity .35s ease;transform-origin:center;
  backface-visibility:hidden;z-index:2;
}
/* add a slight snowy glow overlay on the front to match aesthetic */
.img-wrap::after{
  content:"";position:absolute;inset:0;pointer-events:none;background:linear-gradient(180deg, rgba(234,247,255,0.02), rgba(234,247,255,0.0));mix-blend-mode:screen;
}

/* front image */
.front-img{width:100%;height:100%;object-fit:cover;display:block}

/* BACK (hidden until flip) */
.back{
  position:absolute;inset:0;display:flex;align-items:center;justify-content:center;text-align:center;color:var(--white);
  padding:18px;background:rgba(0,0,0,0.25);z-index:1;opacity:0;pointer-events:none;transition:opacity .5s ease;
}
/* when the panel has .flipped, make back visible above */
.panel.flipped .back{opacity:1;pointer-events:auto;z-index:3}

/* blurred image inside back */
.blur-image{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:blur(10px) brightness(.85);transform:scale(1.02);z-index:1}
/* back text sits above the blur */
.panel-text{position:relative;z-index:3;font-size:clamp(12px,3vw,18px);line-height:1.45;text-shadow:0 6px 18px rgba(0,0,0,0.6);text-align:center}

/* when img is flipped visually rotate it */
.img-flipped{transform:rotateY(180deg);opacity:0.95}

/* letter page */
.letter-wrap{width:92%;max-width:920px;background:rgba(255,255,255,0.06);backdrop-filter:blur(6px);border-radius:14px;padding:26px;color:#fff;box-shadow:0 20px 60px rgba(0,20,40,0.5);z-index:5}
.letter-title{font-size:clamp(22px,5vw,36px);font-weight:900;margin-bottom:12px}
.letter-text{font-size:clamp(14px,3.4vw,18px);line-height:1.6;white-space:pre-wrap;text-align:left}
.letter-overlay{position:absolute;inset:0;cursor:pointer;z-index:7}

/* screen5 slideshow */
#slides-wrap{position:absolute;inset:0;z-index:0;overflow:hidden}
.slide{position:absolute;inset:0;background-size:cover;background-position:center;filter:blur(8px) brightness(.82);opacity:0;transition:opacity 1s ease}
.slide.show{opacity:1}
.final-line{color:#fff;font-weight:800;font-size:clamp(18px,4vw,30px);opacity:0;transform:translateY(10px);transition:opacity .9s,transform .9s}

/* responsiveness */
@media(max-width:420px){
  .panel{height:28vh}
  .letter-text{text-align:center}
}
</style>
</head>
<body>

<!-- AUDIO (must be in assets folder) -->
<audio id="bgm" src="assets/KaiseHua.mp3" preload="auto" autoplay muted loop></audio>

<!-- SCREEN 1 - INTRO -->
<section id="screen1" class="screen active" aria-label="Intro">
  <div class="bg" style="background-image:url('assets/intro.jpeg')"></div>
  <div class="wrap">
    <div class="title1">HAPPY BIRTHDAY JANUDI</div>
    <div class="subtitle1">A SPECIAL DAY FOR THE LOVE OF MY LIFE</div>
    <button id="openBtn" class="tap-btn" aria-label="Tap to open">TAP TO OPEN</button>
  </div>
</section>

<!-- SCREEN 2 - THREE IMAGE PANELS -->
<section id="screen2" class="screen" aria-hidden="true">
  <div class="bg" style="background-image:url('assets/SCREEN3.jpeg')"></div>
  <div class="panel-container">

    <!-- Panel 1 -->
    <div class="panel" id="p2-1" data-index="1">
      <div class="card">
        <div class="img-wrap" id="img2-1">
          <img class="front-img" src="assets/ima1.jpeg" alt="panel1 front">
        </div>
        <div class="back" aria-hidden="false">
          <img class="blur-image" src="assets/ima1.jpeg" alt="">
          <div class="panel-text">
            Happiest birthday Nicky, always stay happy.<br>
            You’re one of the most precious parts of my life.<br>
            Every moment with you feels warm, soft, and safe.<br>
            Tap the 2nd image UMAHH.
          </div>
        </div>
      </div>
    </div>

    <!-- Panel 2 -->
    <div class="panel" id="p2-2" data-index="2">
      <div class="card">
        <div class="img-wrap" id="img2-2">
          <img class="front-img" src="assets/ima2.jpeg" alt="panel2 front">
        </div>
        <div class="back" aria-hidden="false">
          <img class="blur-image" src="assets/ima2.jpeg" alt="">
          <div class="panel-text">
            Your smile, your heart, your softness…<br>
            I fall for them a little more every day.
          </div>
        </div>
      </div>
    </div>

    <!-- Panel 3 -->
    <div class="panel" id="p2-3" data-index="3">
      <div class="card">
        <div class="img-wrap" id="img2-3">
          <img class="front-img" src="assets/ima3.jpeg" alt="panel3 front">
        </div>
        <div class="back" aria-hidden="false">
          <img class="blur-image" src="assets/ima3.jpeg" alt="">
          <div class="panel-text">
            No matter where life takes us,<br>
            my feelings for you will always stay the same—<br>
            pure, patient, gentle, and true.
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- SCREEN 3 - LETTER -->
<section id="screen3" class="screen" aria-hidden="true">
  <div class="bg" style="background-image:url('assets/ima3.jpeg')"></div>
  <div class="wrap letter-wrap" role="article">
    <div class="letter-title">HAPPIEST BIRTHDAY JANUDIIII.</div>
    <div class="letter-text">
If I could describe what you mean to me.
I would say you're a rare kind of warmth—the kind that stays with me even on the coldest days.
You make life softer, happier, and more meaningful just by being in it.
I'm grateful for you in ways words will never fully express.
Thank you for being you.
for being real.
for being someone my heart chose without hesitation.
I may not always say it perfectly, and I may not always express everything the right way…
but every word I write for you, every feeling I share —
it all comes from a place that is real inside me.
    </div>
  </div>
  <div class="letter-overlay" onclick="showScreen('screen4')" aria-hidden="false"></div>
</section>

<!-- SCREEN 4 - THREE PANELS (has front titles) -->
<section id="screen4" class="screen" aria-hidden="true">
  <div class="bg" style="background-image:url('assets/SCREEN5.jpeg')"></div>
  <div class="panel-container">

    <!-- 4-1 -->
    <div class="panel" id="p4-1" data-index="1">
      <div class="card">
        <div class="img-wrap" id="img4-1">
          <!-- front title block (centered) -->
          <div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:transparent;color:white;font-weight:800;font-size:clamp(14px,4vw,20px);z-index:3">
            WHY I LOVE YOU
          </div>
        </div>
        <div class="back">
          <img class="blur-image" src="assets/ONE.jpeg" alt="">
          <div class="panel-text">I love you because you never give up on us.</div>
        </div>
      </div>
    </div>

    <!-- 4-2 -->
    <div class="panel" id="p4-2" data-index="2">
      <div class="card">
        <div class="img-wrap" id="img4-2">
          <div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:transparent;color:white;font-weight:800;font-size:clamp(14px,4vw,20px);z-index:3">
            MY PROMISES TO YOU
          </div>
        </div>
        <div class="back">
          <img class="blur-image" src="assets/TWO.jpeg" alt="">
          <div class="panel-text">I promise I'll never let a girl come between us.</div>
        </div>
      </div>
    </div>

    <!-- 4-3 -->
    <div class="panel" id="p4-3" data-index="3">
      <div class="card">
        <div class="img-wrap" id="img4-3">
          <div style="position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:transparent;color:white;font-weight:800;font-size:clamp(14px,4vw,20px);z-index:3">
            THE FUTURE I WANT WITH YOU
          </div>
        </div>
        <div class="back">
          <img class="blur-image" src="assets/THREE.jpeg" alt="">
          <div class="panel-text">
            We get married with our parents' permission and work hard.<br>
            We have our own house.<br>
            Every morning we wake up beside each other.
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<!-- SCREEN 5 - FINAL SLIDESHOW + LOOPING LINES -->
<section id="screen5" class="screen" aria-hidden="true">
  <div id="slides-wrap">
    <div class="slide" style="background-image:url('assets/intro.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/ima1.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/ima2.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/ima3.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/SCREEN3.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/SCREEN5.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/ONE.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/TWO.jpeg')"></div>
    <div class="slide" style="background-image:url('assets/THREE.jpeg')"></div>
  </div>

  <div class="wrap" style="z-index:6">
    <div class="final-line" id="line1">WITH ALL MY LOVE (:</div>
    <div class="final-line" id="line2">FOREVER YOURS....</div>
    <div class="final-line" id="line3">THANK YOU FOR LETTING ME LOVE YOU...><</div>
    <div class="final-line" id="line4">SOME LOVE STORIES DON'T NEED WORDS... OURS IS ONE OF THEM>>></div>
    <div class="final-line" id="line5">YOURS JERRY</div>
  </div>
</section>

<script>
/* ---------- show screen utility ---------- */
function showScreen(id){
  document.querySelectorAll('.screen').forEach(s=>{
    s.classList.remove('active');
    s.setAttribute('aria-hidden','true');
  });
  const el = document.getElementById(id);
  if(!el) return;
  el.classList.add('active');
  el.removeAttribute('aria-hidden');

  // if we reached screen5, start final loop after small delay
  if(id === 'screen5'){
    setTimeout(()=> startFinalLoop(), 350);
  }
}

/* ---------- audio control ---------- */
const bgm = document.getElementById('bgm');
bgm.volume = 1;
document.getElementById('openBtn').addEventListener('click', async () => {
  try{
    bgm.muted = false;
    await bgm.play();
  }catch(e){
    // ignore browser autoplay restrictions
  }
  showScreen('screen2');
});

/* ---------- flip logic helper ---------- */
function setupPanels(panelPrefix, imgPrefix, total, nextScreen){
  const flipped = new Array(total).fill(false);

  for(let i=1;i<=total;i++){
    const panel = document.getElementById(`${panelPrefix}-${i}`);
    const imgWrap = document.getElementById(`${imgPrefix}-${i}`);

    if(!panel || !imgWrap) continue;

    // front tap: flip image only
    panel.addEventListener('click', (ev)=>{
      // if already flipped do nothing
      if(panel.classList.contains('flipped')) return;

      // visually rotate front image
      imgWrap.classList.add('img-flipped');

      // mark panel as flipped (shows back)
      panel.classList.add('flipped');

      flipped[i-1] = true;

      // check if all flipped then wait 5s and go to next
      if(flipped.every(Boolean)){
        setTimeout(()=> showScreen(nextScreen), 5000);
      }
    }, {passive:true});

    // back click: prevent bubbling and ensure flipped state
    const back = panel.querySelector('.back');
    if(back){
      back.addEventListener('click', (ev)=>{
        ev.stopPropagation();
        if(!panel.classList.contains('flipped')){
          imgWrap.classList.add('img-flipped');
          panel.classList.add('flipped');
          flipped[i-1] = true;
        }
        if(flipped.every(Boolean)){
          setTimeout(()=> showScreen(nextScreen), 5000);
        }
      }, {passive:true});
    }
  }
}

/* initialize screens 2 and 4 panels */
setupPanels('p2','img2',3,'screen3');
setupPanels('p4','img4',3,'screen5');

/* ---------- screen5 slideshow + looping lines ---------- */
let slideTimer = null;
function startSlides(){
  const slides = Array.from(document.querySelectorAll('.slide'));
  if(!slides.length) return;
  let idx = 0;
  // clear existing
  slides.forEach(s => s.classList.remove('show'));
  slides[0].classList.add('show');
  if(slideTimer) clearInterval(slideTimer);
  slideTimer = setInterval(()=>{
    slides[idx].classList.remove('show');
    idx = (idx + 1) % slides.length;
    slides[idx].classList.add('show');
  }, 2000);
}

/* animate lines: fade in one-by-one, fade out one-by-one, wait 0.5s, repeat */
let finalLoopRunning = false;
function startFinalLoop(){
  if(finalLoopRunning) return;
  finalLoopRunning = true;

  const lines = ['line1','line2','line3','line4','line5'].map(id => document.getElementById(id));
  // ensure initial styles
  lines.forEach(el=>{
    if(el){
      el.style.opacity = 0;
      el.style.transform = 'translateY(10px)';
    }
  });

  // start slideshow
  startSlides();

  // function to run one full cycle
  function runCycle(){
    let delay = 400;
    // fade in sequentially
    lines.forEach((el,i)=>{
      if(!el) return;
      setTimeout(()=>{
        el.style.transition = 'opacity 900ms ease, transform 900ms ease';
        el.style.opacity = 1;
        el.style.transform = 'translateY(0)';
      }, delay);
      delay += 1800;
    });

    // fade out sequentially after last in
    const outStart = delay + 1200; // wait a bit after last arrived
    lines.forEach((el,i)=>{
      if(!el) return;
      setTimeout(()=>{
        el.style.transition = 'opacity 900ms ease';
        el.style.opacity = 0;
      }, outStart + i*900);
    });

    // schedule next run after full cycle + 500ms pause
    const totalCycle = outStart + (lines.length * 900) + 500;
    setTimeout(()=> runCycle(), totalCycle);
  }

  // start cycle
  runCycle();
}

/* ensure initial state on load */
window.addEventListener('load', ()=>{
  // show intro
  showScreen('screen1');

  // remove any pre-flipped classes (safety)
  ['img2-1','img2-2','img2-3','img4-1','img4-2','img4-3'].forEach(id=>{
    const el = document.getElementById(id);
    if(el) el.classList.remove('img-flipped');
  });
});
</script>
</body>
</html>